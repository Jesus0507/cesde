{"version":3,"file":"/js/back.js","mappings":"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","sources":["webpack://cesde-portal/./src/admin/js/backoffice.js"],"sourcesContent":["jQuery(document).ready(function ($) {\n  function taxonomy_media_upload(\n    button_id,\n    wrapper_image,\n    imageID,\n    button_remove\n  ) {\n    var custom_media = true,\n      original_attachment = wp.media.editor.send.attachment;\n    $(`#${button_id}`).on(\"click\", function (e) {\n      custom_media = true;\n\n      wp.media.editor.send.attachment = function (props, attachment) {\n        if (custom_media) {\n          $(`#${imageID}`).val(attachment.id);\n          $(`#${wrapper_image}`).html(\n            `<img class=\"custom_media_image img-fluid\" src=\"\"  \n           style=\"width:auto;max-height:350px;margin:0;padding:0;float:none;\" />`\n          );\n          $(`#${wrapper_image} .custom_media_image`)\n            .attr(\"src\", attachment.url)\n            .css(\"display\", \"block\");\n        } else {\n          return original_attachment.apply(button_id, [props, attachment]);\n        }\n      };\n      wp.media.editor.open(button_id);\n      return false;\n    });\n    if ($(`#${button_remove}`)) {\n      $(`#${button_remove}`).on(\"click\", function () {\n        $(`#${imageID}`).val(\"\");\n        $(\n          `#${wrapper_image}`\n        ).html(`<img class=\"custom_media_image img-fluid\" src=\"${cesde_back_ajax.project_url}/assets/img/logo.png\"  \n        style=\"width:auto;max-height:350px;margin:0;padding:0;float:none;\" />`);\n      });\n    }\n  }\n  function submitOptionsData(wrapperForm) {\n    const form = document.getElementById(`${wrapperForm}_form`);\n    if (form) {\n      form.addEventListener(\"submit\", (e) => {\n        e.preventDefault();\n        const savingData = document.querySelector(\n          `.container-cesde .saving-data`\n        );\n\n        savingData.style.display = \"flex\";\n        const option = document.getElementById(\"option\");\n        const action = document.getElementById(\"action\");\n        const front_image = document.getElementById(\"front_image\");\n        const titulo = document.getElementById(\"titulo\");\n        const color_editor = document.getElementById(\"color_editor\");\n        const meta_content_editor = document.getElementById(\n          \"meta_content_editor\"\n        );\n        const template_section = document.getElementById(\"template_section\");\n        const url = cesde_back_ajax.ajaxurl;\n        const security = document.getElementById(\"security\");\n\n        const data = {\n          option: option.value,\n          action: action.value,\n          security: security.value,\n          front_image: front_image.value,\n          titulo: titulo.value,\n\n          color_editor: color_editor.value,\n          meta_content_editor: meta_content_editor.value,\n          template_section: template_section.value,\n        };\n        const formData = new FormData();\n        formData.append(\"option\", option.value);\n        formData.append(\"action\", action.value);\n        formData.append(\"security\", security.value);\n        formData.append(\"front_image\", front_image.value);\n        formData.append(\"titulo\", titulo.value);\n\n        formData.append(\"color_editor\", color_editor.value);\n        formData.append(\"meta_content_editor\", meta_content_editor.value);\n        formData.append(\"template_section\", template_section.value);\n\n        console.log(data);\n        fetch(url, {\n          method: \"POST\",\n          body: formData,\n        })\n          .then((res) => res.json())\n          .then((res) => {\n            if (res.success) {\n              savingData.innerHTML = '<h2 class=\"save-complete\">Guardado</h2>';\n              setTimeout(() => {\n                savingData.innerHTML = '<div class=\"saving\"></div>';\n                savingData.style.display = \"none\";\n              }, 1000);\n            }\n          });\n      });\n    }\n  }\n  if ($(\"#cesde_sedes_config\")) {\n    taxonomy_media_upload(\n      \"front_image_button\",\n      \"image-wrapper\",\n      \"front_image\",\n      \"front_image_remove\"\n    );\n    let options = {\n      // Podemos declarar un color por defecto aquí\n      // o en el atributo del input data-default-color\n      defaultColor: false,\n      // llamada que se lanzará cuando el input tenga un color válido\n      change: function (event, ui) {},\n      // llamada que se lanzará cuando el input tenga un color no válido\n      clear: function () {},\n      // esconde los controles del Color Picker al cargar\n      hide: true,\n      // muestra un grupo de colores comunes debajo del selector\n      // o suministra de una gama de colores para poder personalizar más aun.\n      palettes: true,\n    };\n    $(\".mi-plugin-color-field\").wpColorPicker(options);\n    submitOptionsData(\"cesde_sedes_config\");\n  }\n  if (document.getElementById(\"cesde_escuela_config\")) {\n    taxonomy_media_upload(\n      \"front_image_button\",\n      \"image-wrapper\",\n      \"front_image\",\n      \"front_image_remove\"\n    );\n    let options = {\n      // Podemos declarar un color por defecto aquí\n      // o en el atributo del input data-default-color\n      defaultColor: false,\n      // llamada que se lanzará cuando el input tenga un color válido\n      change: function (event, ui) {},\n      // llamada que se lanzará cuando el input tenga un color no válido\n      clear: function () {},\n      // esconde los controles del Color Picker al cargar\n      hide: true,\n      // muestra un grupo de colores comunes debajo del selector\n      // o suministra de una gama de colores para poder personalizar más aun.\n      palettes: true,\n    };\n    $(\".mi-plugin-color-field\").wpColorPicker(options);\n    submitOptionsData(\"cesde_escuela_config\");\n  }\n  if (document.getElementById(\"cesde_noticias_config\")) {\n    taxonomy_media_upload(\n      \"front_image_button\",\n      \"image-wrapper\",\n      \"front_image\",\n      \"front_image_remove\"\n    );\n    let options = {\n      // Podemos declarar un color por defecto aquí\n      // o en el atributo del input data-default-color\n      defaultColor: false,\n      // llamada que se lanzará cuando el input tenga un color válido\n      change: function (event, ui) {},\n      // llamada que se lanzará cuando el input tenga un color no válido\n      clear: function () {},\n      // esconde los controles del Color Picker al cargar\n      hide: true,\n      // muestra un grupo de colores comunes debajo del selector\n      // o suministra de una gama de colores para poder personalizar más aun.\n      palettes: true,\n    };\n    $(\".mi-plugin-color-field\").wpColorPicker(options);\n    submitOptionsData(\"cesde_noticias_config\");\n  }\n});\n"],"names":["jQuery","document","ready","$","taxonomy_media_upload","button_id","wrapper_image","imageID","button_remove","custom_media","original_attachment","wp","media","editor","send","attachment","on","e","props","apply","val","id","html","attr","url","css","open","cesde_back_ajax","project_url","submitOptionsData","wrapperForm","form","getElementById","addEventListener","preventDefault","savingData","querySelector","style","display","option","action","front_image","titulo","color_editor","meta_content_editor","template_section","ajaxurl","security","data","value","formData","FormData","append","console","log","fetch","method","body","then","res","json","success","innerHTML","setTimeout","wpColorPicker","defaultColor","change","event","ui","clear","hide","palettes"],"sourceRoot":""}