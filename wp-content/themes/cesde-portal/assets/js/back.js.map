{"version":3,"file":"/js/back.js","mappings":"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","sources":["webpack://cesde-portal/./src/admin/js/backoffice.js"],"sourcesContent":["jQuery(document).ready(function ($) {\r\n  function taxonomy_media_upload(\r\n    button_id,\r\n    wrapper_image,\r\n    imageID,\r\n    button_remove\r\n  ) {\r\n    var custom_media = true,\r\n      original_attachment = wp.media.editor.send.attachment;\r\n    $(`#${button_id}`).on(\"click\", function (e) {\r\n      custom_media = true;\r\n\r\n      wp.media.editor.send.attachment = function (props, attachment) {\r\n        if (custom_media) {\r\n          $(`#${imageID}`).val(attachment.id);\r\n          $(`#${wrapper_image}`).html(\r\n            `<img class=\"custom_media_image img-fluid\" src=\"\"  \r\n           style=\"width:auto;max-height:350px;margin:0;padding:0;float:none;\" />`\r\n          );\r\n          $(`#${wrapper_image} .custom_media_image`)\r\n            .attr(\"src\", attachment.url)\r\n            .css(\"display\", \"block\");\r\n        } else {\r\n          return original_attachment.apply(button_id, [props, attachment]);\r\n        }\r\n      };\r\n      wp.media.editor.open(button_id);\r\n      return false;\r\n    });\r\n    if ($(`#${button_remove}`)) {\r\n      $(`#${button_remove}`).on(\"click\", function () {\r\n        $(`#${imageID}`).val(\"\");\r\n        $(\r\n          `#${wrapper_image}`\r\n        ).html(`<img class=\"custom_media_image img-fluid\" src=\"${cesde_back_ajax.project_url}/assets/img/logo.png\"  \r\n        style=\"width:auto;max-height:350px;margin:0;padding:0;float:none;\" />`);\r\n      });\r\n    }\r\n  }\r\n  function submitOptionsData(wrapperForm) {\r\n    const form = document.getElementById(`${wrapperForm}_form`);\r\n    if (form) {\r\n      form.addEventListener(\"submit\", (e) => {\r\n        e.preventDefault();\r\n        const savingData = document.querySelector(\r\n          `.container-cesde .saving-data`\r\n        );\r\n\r\n        savingData.style.display = \"flex\";\r\n        const option = document.getElementById(\"option\");\r\n        const action = document.getElementById(\"action\");\r\n        const front_image = document.getElementById(\"front_image\");\r\n        const titulo = document.getElementById(\"titulo\");\r\n        const color_editor = document.getElementById(\"color_editor\");\r\n        const meta_content_editor = document.getElementById(\r\n          \"meta_content_editor\"\r\n        );\r\n        const template_section = document.getElementById(\"template_section\");\r\n        const url = cesde_back_ajax.ajaxurl;\r\n        const security = document.getElementById(\"security\");\r\n\r\n        const data = {\r\n          option: option.value,\r\n          action: action.value,\r\n          security: security.value,\r\n          front_image: front_image.value,\r\n          titulo: titulo.value,\r\n\r\n          color_editor: color_editor.value,\r\n          meta_content_editor: meta_content_editor.value,\r\n          template_section: template_section.value,\r\n        };\r\n        const formData = new FormData();\r\n        formData.append(\"option\", option.value);\r\n        formData.append(\"action\", action.value);\r\n        formData.append(\"security\", security.value);\r\n        formData.append(\"front_image\", front_image.value);\r\n        formData.append(\"titulo\", titulo.value);\r\n\r\n        formData.append(\"color_editor\", color_editor.value);\r\n        formData.append(\"meta_content_editor\", meta_content_editor.value);\r\n        formData.append(\"template_section\", template_section.value);\r\n\r\n        console.log(data);\r\n        fetch(url, {\r\n          method: \"POST\",\r\n          body: formData,\r\n        })\r\n          .then((res) => res.json())\r\n          .then((res) => {\r\n            if (res.success) {\r\n              savingData.innerHTML = '<h2 class=\"save-complete\">Guardado</h2>';\r\n              setTimeout(() => {\r\n                savingData.innerHTML = '<div class=\"saving\"></div>';\r\n                savingData.style.display = \"none\";\r\n              }, 1000);\r\n            }\r\n          });\r\n      });\r\n    }\r\n  }\r\n  if ($(\"#cesde_sedes_config\")) {\r\n    taxonomy_media_upload(\r\n      \"front_image_button\",\r\n      \"image-wrapper\",\r\n      \"front_image\",\r\n      \"front_image_remove\"\r\n    );\r\n    let options = {\r\n      // Podemos declarar un color por defecto aquí\r\n      // o en el atributo del input data-default-color\r\n      defaultColor: false,\r\n      // llamada que se lanzará cuando el input tenga un color válido\r\n      change: function (event, ui) {},\r\n      // llamada que se lanzará cuando el input tenga un color no válido\r\n      clear: function () {},\r\n      // esconde los controles del Color Picker al cargar\r\n      hide: true,\r\n      // muestra un grupo de colores comunes debajo del selector\r\n      // o suministra de una gama de colores para poder personalizar más aun.\r\n      palettes: true,\r\n    };\r\n    $(\".mi-plugin-color-field\").wpColorPicker(options);\r\n    submitOptionsData(\"cesde_sedes_config\");\r\n  }\r\n  if (document.getElementById(\"cesde_escuela_config\")) {\r\n    taxonomy_media_upload(\r\n      \"front_image_button\",\r\n      \"image-wrapper\",\r\n      \"front_image\",\r\n      \"front_image_remove\"\r\n    );\r\n    let options = {\r\n      // Podemos declarar un color por defecto aquí\r\n      // o en el atributo del input data-default-color\r\n      defaultColor: false,\r\n      // llamada que se lanzará cuando el input tenga un color válido\r\n      change: function (event, ui) {},\r\n      // llamada que se lanzará cuando el input tenga un color no válido\r\n      clear: function () {},\r\n      // esconde los controles del Color Picker al cargar\r\n      hide: true,\r\n      // muestra un grupo de colores comunes debajo del selector\r\n      // o suministra de una gama de colores para poder personalizar más aun.\r\n      palettes: true,\r\n    };\r\n    $(\".mi-plugin-color-field\").wpColorPicker(options);\r\n    submitOptionsData(\"cesde_escuela_config\");\r\n  }\r\n  if (document.getElementById(\"cesde_noticias_config\")) {\r\n    taxonomy_media_upload(\r\n      \"front_image_button\",\r\n      \"image-wrapper\",\r\n      \"front_image\",\r\n      \"front_image_remove\"\r\n    );\r\n    let options = {\r\n      // Podemos declarar un color por defecto aquí\r\n      // o en el atributo del input data-default-color\r\n      defaultColor: false,\r\n      // llamada que se lanzará cuando el input tenga un color válido\r\n      change: function (event, ui) {},\r\n      // llamada que se lanzará cuando el input tenga un color no válido\r\n      clear: function () {},\r\n      // esconde los controles del Color Picker al cargar\r\n      hide: true,\r\n      // muestra un grupo de colores comunes debajo del selector\r\n      // o suministra de una gama de colores para poder personalizar más aun.\r\n      palettes: true,\r\n    };\r\n    $(\".mi-plugin-color-field\").wpColorPicker(options);\r\n    submitOptionsData(\"cesde_noticias_config\");\r\n  }\r\n});\r\n"],"names":["jQuery","document","ready","$","taxonomy_media_upload","button_id","wrapper_image","imageID","button_remove","custom_media","original_attachment","wp","media","editor","send","attachment","on","e","props","apply","val","id","html","attr","url","css","open","cesde_back_ajax","project_url","submitOptionsData","wrapperForm","form","getElementById","addEventListener","preventDefault","savingData","querySelector","style","display","option","action","front_image","titulo","color_editor","meta_content_editor","template_section","ajaxurl","security","data","value","formData","FormData","append","console","log","fetch","method","body","then","res","json","success","innerHTML","setTimeout","wpColorPicker","defaultColor","change","event","ui","clear","hide","palettes"],"sourceRoot":""}